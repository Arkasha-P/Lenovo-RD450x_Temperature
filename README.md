# Lenovo-RD450x_Temperature
Скрипт для управления кулерами материнской платы Lenovo RD450x на основе температур процессоров.

### temp_cpu.sh

Скрипт мониторит температуру процессоров. При достижении высоких пороговых значений (настраивается вручную) включается турбо-режим.
Турбо-режим переводит все кулеры в состояние максимальных оборотов на всей плате. После достижения низких пороговых значений турбо-режим выключается.

Запускается командой `bash temp_cpu.sh &` - запуск в фоне
Мониторинг лога `tail -f /var/log/cpu_temp_monitor.log`

```
HIGH_TEMP=50 # Порог включения усиленного охлаждения
LOW_TEMP=40 # Порог отключения усиленного охлаждения
CHECK_INTERVAL=5 # Интервал проверки (секунд)
```


### Преимущества скрипта

- запускается в одной копии
- может работать в фоне
- включает турбо-режим при достижении высоких пороговых значений 1-го или 2-го CPU
- пишет лог `/var/log/cpu_temp_monitor.log`, который удобно просматривать через `tail -f /var/log/cpu_temp_monitor.log`


### cpu_strees.sh

Скрипт нагрузки CPU для проверки работоспособности охлаждения.

⚠️**Запускать в контролируемой ситуации. Вызывает сильную нагрузку на CPU и может привести к перегреву системы**⚠️

Запускать `bash cpu_strees.sh` или 

`(bash cpu_strees.sh &) && sleep $((60 * 10)) && killall 'cpu_strees.sh'` - запускает стрес тест на 10 минут и заканчивает.

Останавливать CTRL + C или `killall 'cpu_strees.sh'`

### setup.sh

#### Установка

```
wget https://raw.githubusercontent.com/Arkasha-P/Lenovo-RD450x_Temperature/refs/heads/main/setup.sh
```

#### Инструкция по использованию:
Сохраните этот скрипт как setup.sh

Дайте права на выполнение:

```
chmod +x setup.sh
```
Запустите с правами root:
```
sudo ./setup.sh
```
Что делает скрипт:
- Устанавливает необходимые пакеты (ipmitool)
- Скачивает основной скрипт мониторинга с GitHub
- Создает systemd службу с автозапуском
- Настраивает логирование в /var/log/cpu_temp_monitor.log
- Добавляет алиас tempmon для просмотра логов
- Запускает службу и проверяет её статус

После установки вы можете использовать:

`tempmon` - просмотр логов в реальном времени

`sudo systemctl status cpu_temp_monitor` - проверка статуса службы

`sudo systemctl restart cpu_temp_monitor` - перезапуск службы
